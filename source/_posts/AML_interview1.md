---
title: 字节跳动AML实习一面
author: Kaizyn
avatar: https://cdn.jsdelivr.net/gh/KaizynX/cdn/img/custom/avatar.jpg
authorLink: https://kaizynx.github.io/
date: 2021-12-29 23:59:59
categories:
  - interview
tags:
hidden: true
message: 责令删除
password: "******"
description: 第一次面试,面得稀烂
photos: https://cdn.jsdelivr.net/gh/KaizynX/cdn/img/posts/AML_interview1/cover.jpg
---
# 序

半(pao)退(lu)役ACM选手的第一次面试，准备欠佳，面得稀烂

# 基本信息

岗位：机器学习平台研发实习生-AML 杭州|研发 - 后端|日常实习生

学校：双非

绩点：排不上名

奖项：区域赛金奖

经历：无

# 面试

## 自我介绍

面试官准时出现，然后让我自我介绍，看一下我的简历，我就说了学校专业，说我大学期间主要在打ACM竞赛拿过一些金牌，然后没了。

然后面试官好像认出是我的学长内推了我

首先他看到我项目经历(华为软挑)有用多线程，问我会不会写

首先我只会基本的，其次我早就忘记函数怎么调用，怕自取其辱，马上说不会

面试官似乎看见我简历上写了 **“能熟练使用C++”**, 噩梦开始

## 题一 hash

手写 map

### 过程

然后他就给了道题，说看下我的代码风格还是什么代码规范

> ACM选手：哦，看啊，我给你封装了，还用了 class ! 特地区分了 private, public欸，平时我就丢若干个函数的嘿

> 面试官：写的什么玩意？

问我哈希表，我说把开一个数组，把那个东西通过哈希函数映射成整数，存在对应位置

冲突的话用散列表，问散列表有什么缺点，答如果冲突太多就影响效率，问还有其他什么缺点吗，不知道。

然后他问什么一次探测，二次探测什么的，问有什么优点，存在即合理，有什么优点

我可不会，我只知道 std::map 用的就是散列表，而且个人认为这个探测如果引起二次冲突三次之类的很麻烦，优点不知道。或许我应该告诉他我所想的缺点，但我没有说

我说会快一些，因为空间局部性什么的如果访问附近的会快一点(纯属瞎扯了)

然后开始实现哈希表，相当于手写 map<string, string>, 实现

```cpp
string get(string);
void insert(string key, string value);
```

然后我吭哧吭哧开始写了，写得不是很顺利，调试了好久才调出来

写的是散列表，用经典的邻接表形式写，就是插入到链表首部

```cpp
int fir[P], nex[P], tot;
string _key[P], _val[P];
void insert(string key, string value) {
  int val = hash<string>()(key) % P;
  _key[tot] = key;
  _val[tot] = value;
  nex[tot] = fir[val];
  fir[val] = tot;
  tot++;
}
```

然后面试官直呼看不懂，然后嫌弃我的acm代码风格

说我不必写得这么炫酷，说我没看过那些优秀工程代码，叫我不要过早优化

道理我都懂，我寻思这不是经典邻接表吗呜呜，我知道他可能真的没看懂吧

他说算我过了

### 小结

首先我确实是没看过工程代码，呜呜

对 C++ 也没有那么熟悉

手写要写这么久也是没想到，一个小 bug 找了半天，菜了

## 题二 shared_ptr

手写 shared_ptr

### 过程

问我 shared_ptr 详情, 我说允许多个指针指向一个地址，内部有个计数器记录有几个指针指向这里，然后清理的时候如果计数器为0，即没有指针指向这个地址，那么这个地址就被释放

让我写，我。。。不会啊

我先口胡说，如果要知道是不是指向同一块地址，要开个静态空间记录一下指向过的区域。。。

发现其实我 shared_ptr 都不会，我稍加思考，问他是不是就两种，一种指向新申请的空间，一种指向另一个 shared_ptr

然后大致有思路了，就是申请一个 cnt 当作计数器，如果是指向新空间，就 new 一个，如果复制 shared_ptr ，就++cnt

然后写，也写了挺久，主要是发现不会 C++ 内存管理， new, delete 用不来

然后大概 45min+ 了，面试官就来看，大致还可以，说我只写了构造，没写赋值函数

还说我析构哪里没写原子，我没听懂，啥原子，原子性？这不是硬件实现的吗

然后他说多线程，没保证多线程运行的时候安全。我可不会写多线程，也没说要写呜呜

### 小结

事后看了下答案，发现我的想法完全一致

> 我：我好牛，面试几分钟从无到有想出了 shared_ptr 的正确实现方法

> 面试官：这币怎么 shared_ptr 都写不来

后经同学证明 c++ 课上有讲(暴露了我没听课的事实)

终究是知识储备不够，不会 shared_ptr, 不会 C++ 内存管理

## 你还有什么问题吗

空大了啊兄弟们，我身边的同学都面的八股+算法，也有字节，大多后端，看网上字节面经也大多如此

我背了半天计网+os八股，结果考我 C++，我是真滴不会啊

自我感觉不好，也说不出什么话，没怎么聊，说没问题了就结束了

后序说等hr通知了，hr说第二天出结果

# 总结

不知道是岗位的不同还是因为有acm奖项的缘故，面试考察的方向与设想的大相径庭

怎么说都应该是自身原因占多，抱着半吊子的决心就去找实习了，投的时候也没多想，投了什么都不清楚

没去了解自己的岗位要求等是导致这次空大的直接原因

另一个面试暴露出来的问题一个是面试技巧的欠缺，另一个就是硬实力不够啊

从长远的目光来看，是自己对学习的态度总是不求甚解，只看重实践，平时对于技术都是会用就好了，很少去了解底层

无论怎么说，痛苦才是人成长的最大动力，能在第一次面试就暴露出问题，也算一种幸运了

**简历一定要谨慎写**

# 后续

HR不怎么想理我的样子

再三逼问下(不是)，一面过了

*2022-02-14*

关于线性探测的优点，适合并发，下面是一个例子。

- hopscotch hash在普通的线性探测哈希表的基础上，保证了一个值要么hash到当前位置，要么hash到接下来H-1个位置中。H通常是一个机器字节大小，比如32或者64。

- 对于查找操作，只要找到对应位置的hop info，然后查找最多H个位置即可
- 
- 插入操作比较复杂，可能需要多次交换位置，首先对key进行hash得到桶的下标i，从i开始线性查找找到第一个空的位置，如果在H-1的范围内则直接插入，如果不在则进行很复杂的逐次向前的调整。如果最终没有找到就需要进行一次rehash。